function buildModal(a){$("#modifyModalLabel").text("Пожалуйста, подождите...");$("#modify-name").val("");$("#modify-alias").val("");$("#modify-phone").val("");$("#modify-vehile-num").val("");$("#modify-vehile-description").val("");$("#modal-delete").unbind("click");$("#modal-save").unbind("click");$("#modal-confirm-msg").hide();$("#modal-confirm-btn").unbind("click");$.ajax({url:"actions/drivers.php",type:"GET",data:{type:"id",id:a},dataType:"json",success:function(b){$("#modifyModalLabel").text("Информация о водителе #"+b.driver_id);$("#modify-name").val(b.name);$("#modify-alias").val(b.alias);$("#modify-phone").val(b.phone_number);$("#modify-vehile-num").val(b.vehile_num);$("#modify-vehile-description").val(b.vehile_description);$("#modal-delete").click(function(){deleteDriver(b.driver_id);return false});$("#modal-save").click(function(){modifyDriver(b.driver_id);return false});if(b.confirmed==0){$("#modal-confirm-msg").show()}$("#modal-confirm-btn").click(function(){confirmDriver(b.driver_id);return false})}});$("#modifyModal").modal("show")}function modifyDriver(a){$.ajax({url:"actions/manager.php",type:"POST",data:{action:"modify",driver_id:a,name:$("#modify-name").val(),alias:$("#modify-alias").val(),phone_number:$("#modify-phone").val(),vehile_num:$("#modify-vehile-num").val(),vehile_description:$("#modify-vehile-description").val()},dataType:"json",complete:function(b){getList();$("#modifyModal").modal("hide")}})}function confirmDriver(a){$.ajax({url:"actions/manager.php",type:"POST",data:{action:"confirm",driver_id:a},dataType:"json",complete:function(b){getList();$("#modal-confirm-msg").hide()}})}function deleteDriver(a){if(window.confirm("Вы уверены, что хотите удалить аккаунт водителя #"+a+"?")){$.ajax({url:"actions/manager.php",type:"POST",data:{action:"delete",driver_id:a},dataType:"json",complete:function(b){getList();$("#modifyModal").modal("hide")}})}};