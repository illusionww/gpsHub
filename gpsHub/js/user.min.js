function signInInit(){$("#signin-password").on("keyup",function(a){if(a.which==13){a.preventDefault();signIn()}});$("#signin-form").submit(function(a){a.preventDefault();signIn();return false})}function signIn(){var b=$("#signin-email").val();var a=$("#signin-password").val();$("#signin-error").hide();if(b==""){responseMsg("email")}else{if(a==""){responseMsg("password")}else{$("#signin-btn").prop("disabled",true);responseMsg("pleasewait");sendRequest()}}}function sendRequest(){var b=$("#signin-email").val();var a=$("#signin-password").val();var c=new jsSHA(a+b,"TEXT");var d=c.getHash("SHA-256","HEX");$.ajax({url:"actions/signin.php",type:"POST",data:{email:b,hash:d},success:function(e){requestResult(e)},error:function(){responseMsg("connectionerror");$("#signin-btn").prop("disabled",false)}})}function requestResult(a){if(a==="yes"){responseMsg("pleasewait");window.location.href="index.php"}else{if(a==="no"){responseMsg("badpass");$("#signin-btn").prop("disabled",false)}else{responseMsg("connectionerror");$("#signin-btn").prop("disabled",false)}}}function responseMsg(a){var b=$("#signin-error");b.hide();b.removeClass("bs-callout-warning");b.removeClass("bs-callout-danger");b.removeClass("bs-callout-info");switch(a){case"email":b.addClass("bs-callout-warning");b.find("p").text("Введите email.");break;case"password":b.addClass("bs-callout-warning");b.find("p").text("Введите пароль.");break;case"badpass":b.addClass("bs-callout-danger");b.find("p").text("Неверное имя пользователя или пароль.");break;case"pleasewait":b.addClass("bs-callout-info");b.find("p").text("Пожалуйста, подождите...");break;case"connectionerror":b.addClass("bs-callout-danger");b.find("p").text("Произошла ошибка во время связи с сервером. Попробуйте обновить страницу");break}b.show()}function signOut(){$.ajax({url:"actions/signout.php",type:"GET",success:function(){window.location.replace("signin.php")}})};